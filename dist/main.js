!function(){"use strict";function e(e,t){const a=e+1;let s="";return a<=t&&(s+="top-"),a>t**2-t&&(s+="bottom-"),Number.isInteger((a-1)/t)?s+="left":Number.isInteger(a/t)?s+="right":s=s.slice(0,-1),""!==s?s:"center"}function t(e,t,a){const s=Array(a**2);s.fill(0);const i=s.map(((e,t)=>({x:t%a,y:Math.floor(t/a)}))),r=i[e],l=i[t];return{diffX:Math.abs(r.x-l.x),diffY:Math.abs(r.y-l.y)}}function a(e,a,s,i=8){const r=t(e,a,i);return r.diffX<=s&&r.diffY<=s&&(0===r.diffY||0===r.diffX||r.diffX===r.diffY)}var s="prairie";class i{constructor(e,t="generic"){if("Character"===new.target.name)throw new Error("You can't create Character class directly");this.level=e,this.attack=0,this.defence=0,this.health=50,this.type=t}}class r{constructor(e,t){if(!(e instanceof i))throw new Error("character must be instance of Character or its children");if("number"!=typeof t)throw new Error("position must be a number");this.character=e,this.position=t}}function l(e,t=8){const a=[...Array(t**2).keys()];let s;return s="opponent"===e?a.filter((e=>e%t==6||e%t==7)):a.filter((e=>e%t==0||e%t==1)),s}function*n(e,t){for(;;){const a=Math.floor(e.length*Math.random()),s=Math.floor(Math.random()*t)+1;yield new e[a](s)}}function c(e,t,a){const s=[],i=l("player",8),c=l("opponent",8);for(let l=0;l<a;l+=1){const a=n(e,t).next().value;let l,o;a.isGoodCharacter?(l=Math.floor(i.length*Math.random()),o=i[l],i.splice(l,1)):(l=Math.floor(c.length*Math.random()),o=c[l],c.splice(l,1)),s.push(new r(a,o))}return s}class o extends i{constructor(e){super(e,"bowman"),this.attack=25,this.defence=25,this.moveCell=2,this.attackCell=2,this.isGoodCharacter=!0}}class h extends i{constructor(e){super(e,"daemon"),this.attack=10,this.defence=40,this.moveCell=1,this.attackCell=4,this.isGoodCharacter=!1}}class d extends i{constructor(e){super(e,"magician"),this.attack=10,this.defence=40,this.moveCell=1,this.attackCell=4,this.isGoodCharacter=!0}}class m extends i{constructor(e){super(e,"swordsman"),this.attack=40,this.defence=10,this.moveCell=4,this.attackCell=1,this.isGoodCharacter=!0}}class C extends i{constructor(e){super(e,"undead"),this.attack=40,this.defence=10,this.moveCell=4,this.attackCell=1,this.isGoodCharacter=!1}}class p extends i{constructor(e){super(e,"vampire"),this.attack=25,this.defence=25,this.moveCell=2,this.attackCell=2,this.isGoodCharacter=!1}}class u{constructor(){this.playerTeam=[o,m,d],this.opponentTeam=[h,C,p]}}class f{constructor(e,t){this.playerTeam=e,this.opponentTeam=t,this.playerMove=!0}static from(e){return null}}var g="pointer",v="crosshair",L="not-allowed";const y=new class{constructor(){this.boardSize=8,this.container=null,this.boardEl=null,this.cells=[],this.cellClickListeners=[],this.cellEnterListeners=[],this.cellLeaveListeners=[],this.newGameListeners=[],this.saveGameListeners=[],this.loadGameListeners=[]}bindToDOM(e){if(!(e instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=e}drawUi(t){this.checkBinding(),this.container.innerHTML='\n      <div class="controls">\n        <button data-id="action-restart" class="btn">New Game</button>\n        <button data-id="action-save" class="btn">Save Game</button>\n        <button data-id="action-load" class="btn">Load Game</button>\n      </div>\n      <div class="board-container">\n        <div data-id="board" class="board"></div>\n      </div>\n    ',this.newGameEl=this.container.querySelector("[data-id=action-restart]"),this.saveGameEl=this.container.querySelector("[data-id=action-save]"),this.loadGameEl=this.container.querySelector("[data-id=action-load]"),this.newGameEl.addEventListener("click",(e=>this.onNewGameClick(e))),this.saveGameEl.addEventListener("click",(e=>this.onSaveGameClick(e))),this.loadGameEl.addEventListener("click",(e=>this.onLoadGameClick(e))),this.boardEl=this.container.querySelector("[data-id=board]"),this.boardEl.classList.add(t);for(let t=0;t<this.boardSize**2;t+=1){const a=document.createElement("div");a.classList.add("cell","map-tile",`map-tile-${e(t,this.boardSize)}`),a.addEventListener("mouseenter",(e=>this.onCellEnter(e))),a.addEventListener("mouseleave",(e=>this.onCellLeave(e))),a.addEventListener("click",(e=>this.onCellClick(e))),this.boardEl.appendChild(a)}this.cells=Array.from(this.boardEl.children)}redrawPositions(e){for(const e of this.cells)e.innerHTML="";for(const a of e){const e=this.boardEl.children[a.position],s=document.createElement("div");s.classList.add("character",a.character.type);const i=document.createElement("div");i.classList.add("health-level");const r=document.createElement("div");r.classList.add("health-level-indicator","health-level-indicator-"+((t=a.character.health)<15?"critical":t<50?"normal":"high")),r.style.width=`${a.character.health}%`,i.appendChild(r),s.appendChild(i),e.appendChild(s)}var t}addCellEnterListener(e){this.cellEnterListeners.push(e)}addCellLeaveListener(e){this.cellLeaveListeners.push(e)}addCellClickListener(e){this.cellClickListeners.push(e)}addNewGameListener(e){this.newGameListeners.push(e)}addSaveGameListener(e){this.saveGameListeners.push(e)}addLoadGameListener(e){this.loadGameListeners.push(e)}onCellEnter(e){e.preventDefault();const t=this.cells.indexOf(e.currentTarget);this.cellEnterListeners.forEach((e=>e.call(null,t)))}onCellLeave(e){e.preventDefault();const t=this.cells.indexOf(e.currentTarget);this.cellLeaveListeners.forEach((e=>e.call(null,t)))}onCellClick(e){const t=this.cells.indexOf(e.currentTarget);this.cellClickListeners.forEach((e=>e.call(null,t)))}onNewGameClick(e){e.preventDefault(),this.newGameListeners.forEach((e=>e.call(null)))}onSaveGameClick(e){e.preventDefault(),this.saveGameListeners.forEach((e=>e.call(null)))}onLoadGameClick(e){e.preventDefault(),this.loadGameListeners.forEach((e=>e.call(null)))}static showError(e){alert(e)}static showMessage(e){alert(e)}selectCell(e,t="yellow"){this.deselectCell(e),this.cells[e].classList.add("selected",`selected-${t}`)}deselectCell(e){const t=this.cells[e];t.classList.remove(...Array.from(t.classList).filter((e=>e.startsWith("selected"))))}showCellTooltip(e,t){this.cells[t].title=e}hideCellTooltip(e){this.cells[e].title=""}showDamage(e,t){return new Promise((a=>{const s=this.cells[e],i=document.createElement("span");i.textContent=t,i.classList.add("damage"),s.appendChild(i),i.addEventListener("animationend",(()=>{s.removeChild(i),a()}))}))}setCursor(e){this.boardEl.style.cursor=e}checkBinding(){if(null===this.container)throw new Error("GamePlay not bind to DOM")}};y.bindToDOM(document.querySelector("#game-container"));const E=new class{constructor(e){this.storage=e}save(e){this.storage.setItem("state",JSON.stringify(e))}load(){try{return JSON.parse(this.storage.getItem("state"))}catch(e){throw new Error("Invalid state")}}}(localStorage),w=new class{constructor(e,t){this.gamePlay=e,this.stateService=t,this.playerTeam=c((new u).playerTeam,1,3),this.opponentTeam=c((new u).opponentTeam,1,3),this.gameState=new f(this.playerTeam,this.opponentTeam)}init(){this.gamePlay.drawUi(s),this.gamePlay.redrawPositions([...this.playerTeam,...this.opponentTeam]),this.enterOnCell(),this.leaveOnCell(),this.clickOnCell()}onCellClick(e){if(this.gameState.selectedCharacter&&this.gameState.selectedCharacter.position===e)this.gamePlay.deselectCell(e),this.gameState.selectedCharacter=null;else{const t=this.hasCharacter(e),s=this.getCharacter(e);if(t&&s.character.isGoodCharacter&&(this.gameState.selectedCharacter=s,this.gamePlay.cells.forEach((e=>{e.classList.remove(...Array.from(e.classList).filter((e=>e.startsWith("selected"))))})),this.gamePlay.selectCell(e),this.gamePlay.setCursor(g)),this.gameState.selectedCharacter&&!t){const t=this.gameState.selectedCharacter.character.moveCell;a(this.gameState.selectedCharacter.position,e,t)&&(this.gameState.playerTeam=this.filterTeam(this.gameState.selectedCharacter),this.gameState.playerTeam=[...this.gameState.playerTeam,this.gameState.selectedCharacter],this.gameState.selectedCharacter.position=e,this.endMove())}}}onCellEnter(e){const s=this.hasCharacter(e),i=this.getCharacter(e);if(s){const t=`ðŸŽ–${i.character.level} ðŸ—¡${i.character.attack} ðŸ›¡${i.character.defence} ðŸ’“${i.character.health}`;this.gamePlay.showCellTooltip(t,e)}if(this.gameState.selectedCharacter&&!s){const t=this.gameState.selectedCharacter.character.moveCell;a(this.gameState.selectedCharacter.position,e,t)&&(this.gamePlay.selectCell(e,"green"),this.gamePlay.setCursor(g))}if(s&&this.gameState.selectedCharacter&&!i.character.isGoodCharacter){const a=this.gameState.selectedCharacter.character.attackCell;!function(e,a,s,i=8){const r=t(e,a,i);return r.diffX<=s&&r.diffY<=s}(this.gameState.selectedCharacter.position,e,a)?this.gamePlay.setCursor(L):(this.gamePlay.selectCell(e,"red"),this.gamePlay.setCursor(v))}}onCellLeave(e){this.gamePlay.setCursor(g),this.gamePlay.cells.forEach((e=>e.classList.remove("selected-green","selected-red"))),this.gamePlay.hideCellTooltip(e)}hasCharacter(e){return[...this.playerTeam,...this.opponentTeam].some((t=>t.position===e))}getCharacter(e){let t=this.playerTeam.find((t=>t.position===e));return t||(t=this.opponentTeam.find((t=>t.position===e))),t}enterOnCell(){this.gamePlay.addCellEnterListener(this.onCellEnter.bind(this))}leaveOnCell(){this.gamePlay.addCellLeaveListener(this.onCellLeave.bind(this))}clickOnCell(){this.gamePlay.addCellClickListener(this.onCellClick.bind(this))}filterTeam(e){let t;return t=e.character.isGoodCharacter?this.gameState.playerTeam.filter((t=>t.position!==e.position)):this.gameState.opponentTeam.filter((t=>t.position!==e.position)),t}endMove(){this.gamePlay.cells.forEach((e=>{e.classList.remove(...Array.from(e.classList).filter((e=>e.startsWith("selected"))))})),this.gamePlay.redrawPositions([...this.gameState.playerTeam,...this.gameState.opponentTeam]),this.gameState.playerMove,this.gameState.playerMove=!1}}(y,E);w.init()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUtaLFVBQVVzQyxVQUFVeEksTUFBTXVFLEtBQUt1QyxFQUFLWixXQUN0QzVELFFBQVF3SSxHQUFTQSxFQUFLckMsV0FBVyxjQUFhLElBRW5EL0csS0FBSytDLFNBQVNtQyxnQkFBZ0IsSUFBSWxGLEtBQUt3SSxVQUFVL0YsY0FBZXpDLEtBQUt3SSxVQUFVOUYsZUFDM0UxQyxLQUFLd0ksVUFBVTVGLFdBQ2pCNUMsS0FBS3dJLFVBQVU1RixZQUFhLENBSWhDLEdIM0lrQ0csRUFBVTZFLEdBQzlDVyxFQUFTRSxNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vanMtcHJvLWRpcGxvbWEvLi9zcmMvanMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vanMtcHJvLWRpcGxvbWEvLi9zcmMvanMvdGhlbWVzLmpzIiwid2VicGFjazovL2pzLXByby1kaXBsb21hLy4vc3JjL2pzL0NoYXJhY3Rlci5qcyIsIndlYnBhY2s6Ly9qcy1wcm8tZGlwbG9tYS8uL3NyYy9qcy9Qb3NpdGlvbmVkQ2hhcmFjdGVyLmpzIiwid2VicGFjazovL2pzLXByby1kaXBsb21hLy4vc3JjL2pzL2dlbmVyYXRvcnMuanMiLCJ3ZWJwYWNrOi8vanMtcHJvLWRpcGxvbWEvLi9zcmMvanMvY2hhcmFjdGVycy9Cb3dtYW4uanMiLCJ3ZWJwYWNrOi8vanMtcHJvLWRpcGxvbWEvLi9zcmMvanMvY2hhcmFjdGVycy9EYWVtb24uanMiLCJ3ZWJwYWNrOi8vanMtcHJvLWRpcGxvbWEvLi9zcmMvanMvY2hhcmFjdGVycy9NYWdpY2lhbi5qcyIsIndlYnBhY2s6Ly9qcy1wcm8tZGlwbG9tYS8uL3NyYy9qcy9jaGFyYWN0ZXJzL1N3b3Jkc21hbi5qcyIsIndlYnBhY2s6Ly9qcy1wcm8tZGlwbG9tYS8uL3NyYy9qcy9jaGFyYWN0ZXJzL1VuZGVhZC5qcyIsIndlYnBhY2s6Ly9qcy1wcm8tZGlwbG9tYS8uL3NyYy9qcy9jaGFyYWN0ZXJzL1ZhbXBpcmUuanMiLCJ3ZWJwYWNrOi8vanMtcHJvLWRpcGxvbWEvLi9zcmMvanMvVGVhbS5qcyIsIndlYnBhY2s6Ly9qcy1wcm8tZGlwbG9tYS8uL3NyYy9qcy9HYW1lU3RhdGUuanMiLCJ3ZWJwYWNrOi8vanMtcHJvLWRpcGxvbWEvLi9zcmMvanMvY3Vyc29ycy5qcyIsIndlYnBhY2s6Ly9qcy1wcm8tZGlwbG9tYS8uL3NyYy9qcy9hcHAuanMiLCJ3ZWJwYWNrOi8vanMtcHJvLWRpcGxvbWEvLi9zcmMvanMvR2FtZVBsYXkuanMiLCJ3ZWJwYWNrOi8vanMtcHJvLWRpcGxvbWEvLi9zcmMvanMvR2FtZVN0YXRlU2VydmljZS5qcyIsIndlYnBhY2s6Ly9qcy1wcm8tZGlwbG9tYS8uL3NyYy9qcy9HYW1lQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEB0b2RvXG4gKiBAcGFyYW0gaW5kZXggLSDQuNC90LTQtdC60YEg0L/QvtC70Y9cbiAqIEBwYXJhbSBib2FyZFNpemUgLSDRgNCw0LfQvNC10YAg0LrQstCw0LTRgNCw0YLQvdC+0LPQviDQv9C+0LvRjyAo0LIg0LTQu9C40L3RgyDQuNC70Lgg0YjQuNGA0LjQvdGDKVxuICogQHJldHVybnMg0YHRgtGA0L7QutCwIC0g0YLQuNC/INGP0YfQtdC50LrQuCDQvdCwINC/0L7Qu9C1OlxuICpcbiAqIHRvcC1sZWZ0XG4gKiB0b3AtcmlnaHRcbiAqIHRvcFxuICogYm90dG9tLWxlZnRcbiAqIGJvdHRvbS1yaWdodFxuICogYm90dG9tXG4gKiByaWdodFxuICogbGVmdFxuICogY2VudGVyXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGpzXG4gKiBjYWxjVGlsZVR5cGUoMCwgOCk7IC8vICd0b3AtbGVmdCdcbiAqIGNhbGNUaWxlVHlwZSgxLCA4KTsgLy8gJ3RvcCdcbiAqIGNhbGNUaWxlVHlwZSg2MywgOCk7IC8vICdib3R0b20tcmlnaHQnXG4gKiBjYWxjVGlsZVR5cGUoNywgNyk7IC8vICdsZWZ0J1xuICogYGBgXG4gKiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbGNUaWxlVHlwZShpbmRleCwgYm9hcmRTaXplKSB7XG4gIC8vIFRPRE86INCy0LDRiCDQutC+0LQg0LHRg9C00LXRgiDRgtGD0YJcbiAgY29uc3QgYm9hcmRGdWxsU2l6ZSA9IGJvYXJkU2l6ZSAqKiAyO1xuICBjb25zdCBub3JtSW5kZXggPSBpbmRleCArIDE7XG4gIGxldCByZXN1bHQgPSAnJztcbiAgLy8g0LXRgdC70Lgg0L3QvtC80LXRgNCwINCy0LXRgNGF0L3QuNC1LCDRgtC+IHRvcFxuICBpZiAobm9ybUluZGV4IDw9IGJvYXJkU2l6ZSkge1xuICAgIHJlc3VsdCArPSAndG9wLSc7XG4gIH1cbiAgLy8g0LXRgdC70Lgg0L3QvtC80LXRgNCwINC90LjQttC90LjQtSwg0YLQviBib3R0b21cbiAgaWYgKG5vcm1JbmRleCA+IGJvYXJkRnVsbFNpemUgLSBib2FyZFNpemUpIHtcbiAgICByZXN1bHQgKz0gJ2JvdHRvbS0nO1xuICB9XG4gIC8vINC10YHQu9C4INC90L7QvNC10YDQsCDQu9C10LLRi9C1INCyINGB0YLQvtC70LHRhtC1LCDRgtC+IGxlZnRcbiAgLy8g0LXRgdC70Lgg0L3QvtC80LXRgNCwINC/0YDQsNCy0YvQtSDQsiDRgdGC0L7Qu9Cx0YbQtSwg0YLQviByaWdodFxuICAvLyDQsiDQv9GA0L7RgtC40LLQvdC+0Lwg0YHQu9GD0YfQsNC1INGD0LTQsNC70Y/QtdC8INC00LXRhNC40YEg0LjQtyDQv9C10YDQtdC80LXQvdC90L7QuVxuICBpZiAoTnVtYmVyLmlzSW50ZWdlcigobm9ybUluZGV4IC0gMSkgLyBib2FyZFNpemUpKSB7XG4gICAgcmVzdWx0ICs9ICdsZWZ0JztcbiAgfSBlbHNlIGlmIChOdW1iZXIuaXNJbnRlZ2VyKG5vcm1JbmRleCAvIGJvYXJkU2l6ZSkpIHtcbiAgICByZXN1bHQgKz0gJ3JpZ2h0JztcbiAgfSBlbHNlIHtcbiAgICByZXN1bHQgPSByZXN1bHQuc2xpY2UoMCwgLTEpO1xuICB9XG5cbiAgaWYgKHJlc3VsdCAhPT0gJycpIHtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcmV0dXJuICdjZW50ZXInO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FsY0hlYWx0aExldmVsKGhlYWx0aCkge1xuICBpZiAoaGVhbHRoIDwgMTUpIHtcbiAgICByZXR1cm4gJ2NyaXRpY2FsJztcbiAgfVxuXG4gIGlmIChoZWFsdGggPCA1MCkge1xuICAgIHJldHVybiAnbm9ybWFsJztcbiAgfVxuXG4gIHJldHVybiAnaGlnaCc7XG59XG5cbi8qKlxuICog0KTRg9C90LrRhtC40Y8g0LLRi9GH0LjRgdC70LXQvdC40Y8g0YDQsNGB0YHRgtC+0Y/QvdC40Y8g0LzQtdC20LTRgyDQtNCy0YPQvNGPINC/0L7Qt9C40YbQuNGP0LzQuCDQv9C+INCz0L7RgNC40LfQvtC90YLQsNC70LggKFgpINC4INC/0L4g0LLQtdGA0YLQuNC60LDQu9C4IChZKVxuICogQGZpcnN0UG9zaXRpb24gLSDQuNC90LTQtdC60YEg0L/QvtC70Y8g0LLRi9C00LXQu9C10L3QvdC+0LPQviDQuNCz0YDQvtC60LBcbiAqIEBzZWNvbmRQb3NpdGlvbiAtINC40L3QtNC10LrRgSDQv9C+0LvRjywg0LrQvtGC0L7RgNC+0LUg0LLRi9C00LXQu9C40Lsg0LjQs9GA0L7QulxuICovXG5mdW5jdGlvbiBkaXN0YW5jZVhZKGZpcnN0UG9zaXRpb24sIHNlY29uZFBvc2l0aW9uLCBib2FyZFNpemUpIHtcbiAgY29uc3QgaW5pdGlhbENvb3JkcyA9IEFycmF5KGJvYXJkU2l6ZSAqKiAyKTtcbiAgaW5pdGlhbENvb3Jkcy5maWxsKDApO1xuICBjb25zdCBjb29yZHMgPSBpbml0aWFsQ29vcmRzLm1hcCgoZSwgaSkgPT4gKHsgeDogaSAlIGJvYXJkU2l6ZSwgeTogTWF0aC5mbG9vcihpIC8gYm9hcmRTaXplKSB9KSk7XG4gIGNvbnN0IGN1cnJlbnRDb29yZHMgPSBjb29yZHNbZmlyc3RQb3NpdGlvbl07XG4gIGNvbnN0IG5leHRDb29yZHMgPSBjb29yZHNbc2Vjb25kUG9zaXRpb25dO1xuICBjb25zdCBkaWZmWCA9IE1hdGguYWJzKGN1cnJlbnRDb29yZHMueCAtIG5leHRDb29yZHMueCk7XG4gIGNvbnN0IGRpZmZZID0gTWF0aC5hYnMoY3VycmVudENvb3Jkcy55IC0gbmV4dENvb3Jkcy55KTtcbiAgcmV0dXJuIHtcbiAgICBkaWZmWCxcbiAgICBkaWZmWSxcbiAgfTtcbn1cblxuLyoqXG4gKiDQpNGD0L3QutGG0LjRjyDQv9GA0L7QstC10YDQutC4INCy0L7Qt9C80L7QttC90L7RgdGC0Lgg0LTQstC40LPQsNGC0YzRgdGPINC/0LXRgNGB0L7QvdCw0LbRgyDQsiDRg9C60LDQt9Cw0L3QvdGD0Y4g0LrQu9C10YLQutGDINC+0YLQvdC+0YHQuNGC0LXQu9GM0L3QviDQtdCz0L4g0L/QvtC70L7QttC10L3QuNGPXG4gKiBAY3VyUG9zaXRpb24gLSDQuNC90LTQtdC60YEg0L/QvtC70Y8g0YLQtdC60YPRidC10Lkg0L/QvtC30LjRhtC40Lgg0L/QtdGA0YHQvtC90LDQttCwXG4gKiBAbmV4dFBvc2l0aW9uIC0g0LjQvdC00LXQutGBINC/0L7Qu9GPINC/0L7Qt9C40YbQuNC4LCDQutGD0LTQsCDQv9C70LDQvdC40YDRg9C10YLRgdGPINC/0LXRgNC10LzQtdGB0YLQuNGC0Ywg0L/QtdGA0YHQvtC90LDQttCwXG4gKiBAbW92ZUNlbGwgLSDQvdCwINGB0LrQvtC70YzQutC+INC60LvQtdGC0L7QuiDQvNC+0LbQtdGCINC00LLQuNCz0LDRgtGM0YHRjyDQv9C10YDRgdC+0L3QsNC2XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHBvc3NpYmxlTW92ZShjdXJQb3NpdGlvbiwgbmV4dFBvc2l0aW9uLCBtb3ZlQ2VsbCwgYm9hcmRTaXplID0gOCkge1xuICBjb25zdCBkaWZmQ29vcmRzID0gZGlzdGFuY2VYWShjdXJQb3NpdGlvbiwgbmV4dFBvc2l0aW9uLCBib2FyZFNpemUpO1xuICBpZiAoZGlmZkNvb3Jkcy5kaWZmWCA8PSBtb3ZlQ2VsbCAmJiBkaWZmQ29vcmRzLmRpZmZZIDw9IG1vdmVDZWxsKSB7XG4gICAgaWYgKGRpZmZDb29yZHMuZGlmZlkgPT09IDAgfHwgZGlmZkNvb3Jkcy5kaWZmWCA9PT0gMFxuICAgICAgfHwgZGlmZkNvb3Jkcy5kaWZmWCA9PT0gZGlmZkNvb3Jkcy5kaWZmWSkge1xuICAgICAgLy8g0L/QtdGA0LXQvNC10YnQtdC90LjQtSDQv9C+INCz0L7RgNC40LfQvtC90YLQsNC70LggLSBkaWZmQ29vcmRzLmRpZmZZID09PSAwXG4gICAgICAvLyDQv9C10YDQtdC80LXRidC10L3QuNC1INC/0L4g0LLQtdGA0YLQuNC60LDQu9C4IC0gZGlmZkNvb3Jkcy5kaWZmWCA9PT0gMFxuICAgICAgLy8g0L/QtdGA0LXQvNC10YnQtdC90LjQtSDQv9C+INC00LjQsNCz0L7QvdCw0LvRj9C8IC0gZGlmZkNvb3Jkcy5kaWZmWCA9PT0gZGlmZkNvb3Jkcy5kaWZmWVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiDQpNGD0L3QutGG0LjRjyDQv9GA0L7QstC10YDQutC4INCy0L7Qt9C80L7QttC90L7RgdGC0Lgg0LDRgtCw0LrQvtCy0LDRgtGMINC/0LXRgNGB0L7QvdCw0LbQsCDQsiDRg9C60LDQt9Cw0L3QvdC+0Lkg0LrQu9C10YLQutC1INC+0YLQvdC+0YHQuNGC0LXQu9GM0L3QviDQtdCz0L4g0L/QvtC70L7QttC10L3QuNGPXG4gKiBAY3VyUG9zaXRpb24gLSDQuNC90LTQtdC60YEg0L/QvtC70Y8g0YLQtdC60YPRidC10Lkg0L/QvtC30LjRhtC40Lgg0L/QtdGA0YHQvtC90LDQttCwXG4gKiBAbmV4dFBvc2l0aW9uIC0g0LjQvdC00LXQutGBINC/0L7Qu9GPINC/0L7Qt9C40YbQuNC4LCDQs9C00LUg0L/Qu9Cw0L3QuNGA0YPQtdGC0YHRjyDQv9GA0L7QuNC30LLQtdGB0YLQuCDQsNGC0LDQutGDINC/0LXRgNGB0L7QvdCw0LbQsFxuICogQGF0dGFja0NlbGwgLSDQvdCwINGB0LrQvtC70YzQutC+INC60LvQtdGC0L7QuiDQvNC+0LbQtdGCINCw0YLQsNC60L7QstCw0YLRjCDQv9C10YDRgdC+0L3QsNC2XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwb3NzaWJsZUF0dGFjayhjdXJQb3NpdGlvbiwgbmV4dFBvc2l0aW9uLCBhdHRhY2tDZWxsLCBib2FyZFNpemUgPSA4KSB7XG4gIGNvbnN0IGRpZmZDb29yZHMgPSBkaXN0YW5jZVhZKGN1clBvc2l0aW9uLCBuZXh0UG9zaXRpb24sIGJvYXJkU2l6ZSk7XG4gIHJldHVybiBkaWZmQ29vcmRzLmRpZmZYIDw9IGF0dGFja0NlbGwgJiYgZGlmZkNvb3Jkcy5kaWZmWSA8PSBhdHRhY2tDZWxsO1xufVxuIiwiY29uc3QgdGhlbWVzID0ge1xuICAxOiAncHJhaXJpZScsXG4gIDI6ICdkZXNlcnQnLFxuICAzOiAnYXJjdGljJyxcbiAgNDogJ21vdW50YWluJyxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRoZW1lcztcbiIsIi8qKlxuICog0JHQsNC30L7QstGL0Lkg0LrQu9Cw0YHRgSwg0L7RgiDQutC+0YLQvtGA0L7Qs9C+INC90LDRgdC70LXQtNGD0Y7RgtGB0Y8g0LrQu9Cw0YHRgdGLINC/0LXRgNGB0L7QvdCw0LbQtdC5XG4gKiBAcHJvcGVydHkgbGV2ZWwgLSDRg9GA0L7QstC10L3RjCDQv9C10YDRgdC+0L3QsNC20LAsINC+0YIgMSDQtNC+IDRcbiAqIEBwcm9wZXJ0eSBhdHRhY2sgLSDQv9C+0LrQsNC30LDRgtC10LvRjCDQsNGC0LDQutC4XG4gKiBAcHJvcGVydHkgZGVmZW5jZSAtINC/0L7QutCw0LfQsNGC0LXQu9GMINC30LDRidC40YLRi1xuICogQHByb3BlcnR5IGhlYWx0aCAtINC30LTQvtGA0L7QstGM0LUg0L/QtdGA0YHQvtC90LDQttCwXG4gKiBAcHJvcGVydHkgdHlwZSAtINGB0YLRgNC+0LrQsCDRgSDQvtC00L3QuNC8INC40Lcg0LTQvtC/0YPRgdGC0LjQvNGL0YUg0LfQvdCw0YfQtdC90LjQuTpcbiAqIHN3b3Jkc21hblxuICogYm93bWFuXG4gKiBtYWdpY2lhblxuICogZGFlbW9uXG4gKiB1bmRlYWRcbiAqIHZhbXBpcmVcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hhcmFjdGVyIHtcbiAgY29uc3RydWN0b3IobGV2ZWwsIHR5cGUgPSAnZ2VuZXJpYycpIHtcbiAgICBpZiAobmV3LnRhcmdldC5uYW1lID09PSAnQ2hhcmFjdGVyJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IGNhbid0IGNyZWF0ZSBDaGFyYWN0ZXIgY2xhc3MgZGlyZWN0bHlcIik7XG4gICAgfVxuICAgIHRoaXMubGV2ZWwgPSBsZXZlbDtcbiAgICB0aGlzLmF0dGFjayA9IDA7XG4gICAgdGhpcy5kZWZlbmNlID0gMDtcbiAgICB0aGlzLmhlYWx0aCA9IDUwO1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgLy8gVE9ETzog0LLRi9Cx0YDQvtGB0LjRgtC1INC40YHQutC70Y7Rh9C10L3QuNC1LCDQtdGB0LvQuCDQutGC0L4t0YLQviDQuNGB0L/QvtC70YzQt9GD0LXRgiBcIm5ldyBDaGFyYWN0ZXIoKVwiIC0gRE9ORVxuICB9XG59XG4iLCJpbXBvcnQgQ2hhcmFjdGVyIGZyb20gJy4vQ2hhcmFjdGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9zaXRpb25lZENoYXJhY3RlciB7XG4gIGNvbnN0cnVjdG9yKGNoYXJhY3RlciwgcG9zaXRpb24pIHtcbiAgICBpZiAoIShjaGFyYWN0ZXIgaW5zdGFuY2VvZiBDaGFyYWN0ZXIpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NoYXJhY3RlciBtdXN0IGJlIGluc3RhbmNlIG9mIENoYXJhY3RlciBvciBpdHMgY2hpbGRyZW4nKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHBvc2l0aW9uICE9PSAnbnVtYmVyJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdwb3NpdGlvbiBtdXN0IGJlIGEgbnVtYmVyJyk7XG4gICAgfVxuXG4gICAgdGhpcy5jaGFyYWN0ZXIgPSBjaGFyYWN0ZXI7XG4gICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICB9XG59XG4iLCJpbXBvcnQgUG9zaXRpb25lZENoYXJhY3RlciBmcm9tICcuL1Bvc2l0aW9uZWRDaGFyYWN0ZXInO1xuXG4vKipcbiAqINCk0YPQvdC60YbQuNGPINCy0L7Qt9Cy0YDQsNGJ0LDQtdGCINGB0L/QuNGB0L7QuiDQstGB0LXRhSDQstC+0LfQvNC+0LbQvdGL0YUg0YLQvtGH0LXQuiDQvdCwINC/0L7Qu9C1INC00LvRjyDRgNCw0YHQv9C+0LvQvtC20LXQvdC40Y8g0LPQtdGA0L7QtdCyINC+0L/RgNC10LTQtdC70LXQvdC90L7Qs9C+INGC0LjQv9CwXG4gKiBAcmV0dXJucyDQvNCw0YHRgdC40LIg0LLRgdC10YUg0LLQvtC30LzQvtC20L3Ri9GFINC60L7QvtGA0LTQuNC90LDRgiDRgdC+0LPQu9Cw0YHQvdC+INGD0YHQu9C+0LLQuNGP0Lwg0LfQsNC00LDRh9C4XG4gKiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFsbG93ZWRDb29yZGluYXRlcyh0eXBlVGVhbSwgYm9hcmRTaXplID0gOCkge1xuICBjb25zdCBhbGxDb29yZHMgPSBbLi4uQXJyYXkoYm9hcmRTaXplICoqIDIpLmtleXMoKV07XG4gIGxldCBhbGxvd2VkQ29vcmRzO1xuXG4gIGlmICh0eXBlVGVhbSA9PT0gJ29wcG9uZW50Jykge1xuICAgIGFsbG93ZWRDb29yZHMgPSBhbGxDb29yZHMuZmlsdGVyKChwb3MpID0+IChwb3MgJSBib2FyZFNpemUgPT09IDYgfHwgcG9zICUgYm9hcmRTaXplID09PSA3KSk7XG4gIH0gZWxzZSB7XG4gICAgYWxsb3dlZENvb3JkcyA9IGFsbENvb3Jkcy5maWx0ZXIoKHBvcykgPT4gKHBvcyAlIGJvYXJkU2l6ZSA9PT0gMCB8fCBwb3MgJSBib2FyZFNpemUgPT09IDEpKTtcbiAgfVxuICByZXR1cm4gYWxsb3dlZENvb3Jkcztcbn1cblxuLyoqXG4gKiDQpNC+0YDQvNC40YDRg9C10YIg0Y3QutC30LXQvNC/0LvRj9GAINC/0LXRgNGB0L7QvdCw0LbQsCDQuNC3INC80LDRgdGB0LjQstCwIGFsbG93ZWRUeXBlcyDRgdC+XG4gKiDRgdC70YPRh9Cw0LnQvdGL0Lwg0YPRgNC+0LLQvdC10Lwg0L7RgiAxINC00L4gbWF4TGV2ZWxcbiAqXG4gKiBAcGFyYW0gYWxsb3dlZFR5cGVzINC80LDRgdGB0LjQsiDQutC70LDRgdGB0L7QslxuICogQHBhcmFtIG1heExldmVsINC80LDQutGB0LjQvNCw0LvRjNC90YvQuSDQstC+0LfQvNC+0LbQvdGL0Lkg0YPRgNC+0LLQtdC90Ywg0L/QtdGA0YHQvtC90LDQttCwXG4gKiBAcmV0dXJucyDQs9C10L3QtdGA0LDRgtC+0YAsINC60L7RgtC+0YDRi9C5INC/0YDQuCDQutCw0LbQtNC+0Lwg0LLRi9C30L7QstC1XG4gKiDQstC+0LfQstGA0LDRidCw0LXRgiDQvdC+0LLRi9C5INGN0LrQt9C10LzQv9C70Y/RgCDQutC70LDRgdGB0LAg0L/QtdGA0YHQvtC90LDQttCwXG4gKlxuICovXG5leHBvcnQgZnVuY3Rpb24qIGNoYXJhY3RlckdlbmVyYXRvcihhbGxvd2VkVHlwZXMsIG1heExldmVsKSB7XG4gIC8vIFRPRE86IHdyaXRlIGxvZ2ljIGhlcmVcbiAgd2hpbGUgKHRydWUpIHtcbiAgICBjb25zdCByVHlwZSA9IE1hdGguZmxvb3IoYWxsb3dlZFR5cGVzLmxlbmd0aCAqIE1hdGgucmFuZG9tKCkpO1xuICAgIGNvbnN0IHJMZXZlbCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG1heExldmVsKSArIDE7XG4gICAgeWllbGQgbmV3IGFsbG93ZWRUeXBlc1tyVHlwZV0ockxldmVsKTtcbiAgfVxufVxuXG4vKipcbiAqINCk0L7RgNC80LjRgNGD0LXRgiDQvNCw0YHRgdC40LIg0L/QtdGA0YHQvtC90LDQttC10Lkg0L3QsCDQvtGB0L3QvtCy0LUgY2hhcmFjdGVyR2VuZXJhdG9yXG4gKiBAcGFyYW0gYWxsb3dlZFR5cGVzINC80LDRgdGB0LjQsiDQutC70LDRgdGB0L7QslxuICogQHBhcmFtIG1heExldmVsINC80LDQutGB0LjQvNCw0LvRjNC90YvQuSDQstC+0LfQvNC+0LbQvdGL0Lkg0YPRgNC+0LLQtdC90Ywg0L/QtdGA0YHQvtC90LDQttCwXG4gKiBAcGFyYW0gY2hhcmFjdGVyQ291bnQg0LrQvtC70LjRh9C10YHRgtCy0L4g0L/QtdGA0YHQvtC90LDQttC10LksINC60L7RgtC+0YDQvtC1INC90YPQttC90L4g0YHRhNC+0YDQvNC40YDQvtCy0LDRgtGMXG4gKiBAcmV0dXJucyDRjdC60LfQtdC80L/Qu9GP0YAgVGVhbSwg0YXRgNCw0L3Rj9GJ0LjQuSDRjdC60LfQtdC80L/Qu9GP0YDRiyDQv9C10YDRgdC+0L3QsNC20LXQuS5cbiAqINCa0L7Qu9C40YfQtdGB0YLQstC+INC/0LXRgNGB0L7QvdCw0LbQtdC5INCyINC60L7QvNCw0L3QtNC1IC0gY2hhcmFjdGVyQ291bnRcbiAqICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUZWFtKGFsbG93ZWRUeXBlcywgbWF4TGV2ZWwsIGNoYXJhY3RlckNvdW50KSB7XG4gIC8vIFRPRE86IHdyaXRlIGxvZ2ljIGhlcmVcbiAgY29uc3QgYm9hcmRTaXplID0gODtcbiAgY29uc3QgbmV3VGVhbSA9IFtdO1xuICBjb25zdCBwbGF5ZXJDb29yZHMgPSBnZXRBbGxvd2VkQ29vcmRpbmF0ZXMoJ3BsYXllcicsIGJvYXJkU2l6ZSk7XG4gIGNvbnN0IG9wcG9uZW50Q29vcmRzID0gZ2V0QWxsb3dlZENvb3JkaW5hdGVzKCdvcHBvbmVudCcsIGJvYXJkU2l6ZSk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFyYWN0ZXJDb3VudDsgaSArPSAxKSB7XG4gICAgY29uc3QgbmV3Q2hhcmFjdGVyID0gY2hhcmFjdGVyR2VuZXJhdG9yKGFsbG93ZWRUeXBlcywgbWF4TGV2ZWwpLm5leHQoKS52YWx1ZTtcbiAgICBsZXQgaW5kZXg7XG4gICAgbGV0IHBvc2l0aW9uO1xuICAgIGlmIChuZXdDaGFyYWN0ZXIuaXNHb29kQ2hhcmFjdGVyKSB7XG4gICAgICBpbmRleCA9IE1hdGguZmxvb3IocGxheWVyQ29vcmRzLmxlbmd0aCAqIE1hdGgucmFuZG9tKCkpO1xuICAgICAgcG9zaXRpb24gPSBwbGF5ZXJDb29yZHNbaW5kZXhdO1xuICAgICAgcGxheWVyQ29vcmRzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGluZGV4ID0gTWF0aC5mbG9vcihvcHBvbmVudENvb3Jkcy5sZW5ndGggKiBNYXRoLnJhbmRvbSgpKTtcbiAgICAgIHBvc2l0aW9uID0gb3Bwb25lbnRDb29yZHNbaW5kZXhdO1xuICAgICAgb3Bwb25lbnRDb29yZHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gICAgbmV3VGVhbS5wdXNoKG5ldyBQb3NpdGlvbmVkQ2hhcmFjdGVyKG5ld0NoYXJhY3RlciwgcG9zaXRpb24pKTtcbiAgfVxuICByZXR1cm4gbmV3VGVhbTtcbn1cbiIsImltcG9ydCBDaGFyYWN0ZXIgZnJvbSAnLi4vQ2hhcmFjdGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQm93bWFuIGV4dGVuZHMgQ2hhcmFjdGVyIHtcbiAgY29uc3RydWN0b3IobGV2ZWwpIHtcbiAgICBzdXBlcihsZXZlbCwgJ2Jvd21hbicpO1xuICAgIHRoaXMuYXR0YWNrID0gMjU7XG4gICAgdGhpcy5kZWZlbmNlID0gMjU7XG4gICAgdGhpcy5tb3ZlQ2VsbCA9IDI7XG4gICAgdGhpcy5hdHRhY2tDZWxsID0gMjtcbiAgICB0aGlzLmlzR29vZENoYXJhY3RlciA9IHRydWU7XG4gIH1cbn1cbiIsImltcG9ydCBDaGFyYWN0ZXIgZnJvbSAnLi4vQ2hhcmFjdGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGFlbW9uIGV4dGVuZHMgQ2hhcmFjdGVyIHtcbiAgY29uc3RydWN0b3IobGV2ZWwpIHtcbiAgICBzdXBlcihsZXZlbCwgJ2RhZW1vbicpO1xuICAgIHRoaXMuYXR0YWNrID0gMTA7XG4gICAgdGhpcy5kZWZlbmNlID0gNDA7XG4gICAgdGhpcy5tb3ZlQ2VsbCA9IDE7XG4gICAgdGhpcy5hdHRhY2tDZWxsID0gNDtcbiAgICB0aGlzLmlzR29vZENoYXJhY3RlciA9IGZhbHNlO1xuICB9XG59XG4iLCJpbXBvcnQgQ2hhcmFjdGVyIGZyb20gJy4uL0NoYXJhY3Rlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hZ2ljaWFuIGV4dGVuZHMgQ2hhcmFjdGVyIHtcbiAgY29uc3RydWN0b3IobGV2ZWwpIHtcbiAgICBzdXBlcihsZXZlbCwgJ21hZ2ljaWFuJyk7XG4gICAgdGhpcy5hdHRhY2sgPSAxMDtcbiAgICB0aGlzLmRlZmVuY2UgPSA0MDtcbiAgICB0aGlzLm1vdmVDZWxsID0gMTtcbiAgICB0aGlzLmF0dGFja0NlbGwgPSA0O1xuICAgIHRoaXMuaXNHb29kQ2hhcmFjdGVyID0gdHJ1ZTtcbiAgfVxufVxuIiwiaW1wb3J0IENoYXJhY3RlciBmcm9tICcuLi9DaGFyYWN0ZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTd29yZHNtYW4gZXh0ZW5kcyBDaGFyYWN0ZXIge1xuICBjb25zdHJ1Y3RvcihsZXZlbCkge1xuICAgIHN1cGVyKGxldmVsLCAnc3dvcmRzbWFuJyk7XG4gICAgdGhpcy5hdHRhY2sgPSA0MDtcbiAgICB0aGlzLmRlZmVuY2UgPSAxMDtcbiAgICB0aGlzLm1vdmVDZWxsID0gNDtcbiAgICB0aGlzLmF0dGFja0NlbGwgPSAxO1xuICAgIHRoaXMuaXNHb29kQ2hhcmFjdGVyID0gdHJ1ZTtcbiAgfVxufVxuIiwiaW1wb3J0IENoYXJhY3RlciBmcm9tICcuLi9DaGFyYWN0ZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVbmRlYWQgZXh0ZW5kcyBDaGFyYWN0ZXIge1xuICBjb25zdHJ1Y3RvcihsZXZlbCkge1xuICAgIHN1cGVyKGxldmVsLCAndW5kZWFkJyk7XG4gICAgdGhpcy5hdHRhY2sgPSA0MDtcbiAgICB0aGlzLmRlZmVuY2UgPSAxMDtcbiAgICB0aGlzLm1vdmVDZWxsID0gNDtcbiAgICB0aGlzLmF0dGFja0NlbGwgPSAxO1xuICAgIHRoaXMuaXNHb29kQ2hhcmFjdGVyID0gZmFsc2U7XG4gIH1cbn1cbiIsImltcG9ydCBDaGFyYWN0ZXIgZnJvbSAnLi4vQ2hhcmFjdGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmFtcGlyZSBleHRlbmRzIENoYXJhY3RlciB7XG4gIGNvbnN0cnVjdG9yKGxldmVsKSB7XG4gICAgc3VwZXIobGV2ZWwsICd2YW1waXJlJyk7XG4gICAgdGhpcy5hdHRhY2sgPSAyNTtcbiAgICB0aGlzLmRlZmVuY2UgPSAyNTtcbiAgICB0aGlzLm1vdmVDZWxsID0gMjtcbiAgICB0aGlzLmF0dGFja0NlbGwgPSAyO1xuICAgIHRoaXMuaXNHb29kQ2hhcmFjdGVyID0gZmFsc2U7XG4gIH1cbn1cbiIsIi8qKlxuICog0JrQu9Cw0YHRgSwg0L/RgNC10LTRgdGC0LDQstC70Y/RjtGJ0LjQuSDQv9C10YDRgdC+0L3QsNC20LXQuSDQutC+0LzQsNC90LTRi1xuICpcbiAqIEB0b2RvINCh0LDQvNC+0YHRgtC+0Y/RgtC10LvRjNC90L4g0L/RgNC+0LTRg9C80LDQudGC0LUg0YXRgNCw0L3QtdC90LjQtSDQv9C10YDRgdC+0L3QsNC20LXQuSDQsiDQutC70LDRgdGB0LVcbiAqINCd0LDQv9GA0LjQvNC10YBcbiAqIEBleGFtcGxlXG4gKiBgYGBqc1xuICogY29uc3QgY2hhcmFjdGVycyA9IFtuZXcgU3dvcmRzbWFuKDIpLCBuZXcgQm93bWFuKDEpXVxuICogY29uc3QgdGVhbSA9IG5ldyBUZWFtKGNoYXJhY3RlcnMpO1xuICpcbiAqIHRlYW0uY2hhcmFjdGVycyAvLyBbc3dvcmRzbWFuLCBib3dtYW5dXG4gKiBgYGBcbiAqICovXG5cbmltcG9ydCBCb3dtYW4gZnJvbSAnLi9jaGFyYWN0ZXJzL0Jvd21hbic7XG5pbXBvcnQgRGFlbW9uIGZyb20gJy4vY2hhcmFjdGVycy9EYWVtb24nO1xuaW1wb3J0IE1hZ2ljaWFuIGZyb20gJy4vY2hhcmFjdGVycy9NYWdpY2lhbic7XG5pbXBvcnQgU3dvcmRzbWFuIGZyb20gJy4vY2hhcmFjdGVycy9Td29yZHNtYW4nO1xuaW1wb3J0IFVuZGVhZCBmcm9tICcuL2NoYXJhY3RlcnMvVW5kZWFkJztcbmltcG9ydCBWYW1waXJlIGZyb20gJy4vY2hhcmFjdGVycy9WYW1waXJlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGVhbSB7XG4gIC8vIFRPRE86IHdyaXRlIHlvdXIgbG9naWMgaGVyZVxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnBsYXllclRlYW0gPSBbQm93bWFuLCBTd29yZHNtYW4sIE1hZ2ljaWFuXTtcbiAgICB0aGlzLm9wcG9uZW50VGVhbSA9IFtEYWVtb24sIFVuZGVhZCwgVmFtcGlyZV07XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVTdGF0ZSB7XG4gIGNvbnN0cnVjdG9yKHBsYXllclRlYW0sIG9wcG9uZW50VGVhbSkge1xuICAgIHRoaXMucGxheWVyVGVhbSA9IHBsYXllclRlYW07XG4gICAgdGhpcy5vcHBvbmVudFRlYW0gPSBvcHBvbmVudFRlYW07XG4gICAgdGhpcy5wbGF5ZXJNb3ZlID0gdHJ1ZTtcbiAgfVxuXG4gIHN0YXRpYyBmcm9tKG9iamVjdCkge1xuICAgIC8vIFRPRE86IGNyZWF0ZSBvYmplY3RcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuIiwiY29uc3QgY3Vyc29ycyA9IHtcbiAgYXV0bzogJ2F1dG8nLFxuICBwb2ludGVyOiAncG9pbnRlcicsXG4gIGNyb3NzaGFpcjogJ2Nyb3NzaGFpcicsXG4gIG5vdGFsbG93ZWQ6ICdub3QtYWxsb3dlZCcsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjdXJzb3JzO1xuIiwiLyoqXG4gKiBFbnRyeSBwb2ludCBvZiBhcHA6IGRvbid0IGNoYW5nZSB0aGlzXG4gKi9cbmltcG9ydCBHYW1lUGxheSBmcm9tICcuL0dhbWVQbGF5JztcbmltcG9ydCBHYW1lQ29udHJvbGxlciBmcm9tICcuL0dhbWVDb250cm9sbGVyJztcbmltcG9ydCBHYW1lU3RhdGVTZXJ2aWNlIGZyb20gJy4vR2FtZVN0YXRlU2VydmljZSc7XG5cbmNvbnN0IGdhbWVQbGF5ID0gbmV3IEdhbWVQbGF5KCk7XG5nYW1lUGxheS5iaW5kVG9ET00oZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dhbWUtY29udGFpbmVyJykpO1xuXG5jb25zdCBzdGF0ZVNlcnZpY2UgPSBuZXcgR2FtZVN0YXRlU2VydmljZShsb2NhbFN0b3JhZ2UpO1xuXG5jb25zdCBnYW1lQ3RybCA9IG5ldyBHYW1lQ29udHJvbGxlcihnYW1lUGxheSwgc3RhdGVTZXJ2aWNlKTtcbmdhbWVDdHJsLmluaXQoKTtcblxuLy8gZG9uJ3Qgd3JpdGUgeW91ciBjb2RlIGhlcmVcbiIsImltcG9ydCB7IGNhbGNIZWFsdGhMZXZlbCwgY2FsY1RpbGVUeXBlIH0gZnJvbSAnLi91dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVQbGF5IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5ib2FyZFNpemUgPSA4O1xuICAgIHRoaXMuY29udGFpbmVyID0gbnVsbDtcbiAgICB0aGlzLmJvYXJkRWwgPSBudWxsO1xuICAgIHRoaXMuY2VsbHMgPSBbXTtcbiAgICB0aGlzLmNlbGxDbGlja0xpc3RlbmVycyA9IFtdO1xuICAgIHRoaXMuY2VsbEVudGVyTGlzdGVuZXJzID0gW107XG4gICAgdGhpcy5jZWxsTGVhdmVMaXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLm5ld0dhbWVMaXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLnNhdmVHYW1lTGlzdGVuZXJzID0gW107XG4gICAgdGhpcy5sb2FkR2FtZUxpc3RlbmVycyA9IFtdO1xuICB9XG5cbiAgYmluZFRvRE9NKGNvbnRhaW5lcikge1xuICAgIGlmICghKGNvbnRhaW5lciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb250YWluZXIgaXMgbm90IEhUTUxFbGVtZW50Jyk7XG4gICAgfVxuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXdzIGJvYXJkRWwgd2l0aCBzcGVjaWZpYyB0aGVtZVxuICAgKlxuICAgKiBAcGFyYW0gdGhlbWVcbiAgICovXG4gIGRyYXdVaSh0aGVtZSkge1xuICAgIHRoaXMuY2hlY2tCaW5kaW5nKCk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwiY29udHJvbHNcIj5cbiAgICAgICAgPGJ1dHRvbiBkYXRhLWlkPVwiYWN0aW9uLXJlc3RhcnRcIiBjbGFzcz1cImJ0blwiPk5ldyBHYW1lPC9idXR0b24+XG4gICAgICAgIDxidXR0b24gZGF0YS1pZD1cImFjdGlvbi1zYXZlXCIgY2xhc3M9XCJidG5cIj5TYXZlIEdhbWU8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvbiBkYXRhLWlkPVwiYWN0aW9uLWxvYWRcIiBjbGFzcz1cImJ0blwiPkxvYWQgR2FtZTwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiYm9hcmQtY29udGFpbmVyXCI+XG4gICAgICAgIDxkaXYgZGF0YS1pZD1cImJvYXJkXCIgY2xhc3M9XCJib2FyZFwiPjwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYDtcblxuICAgIHRoaXMubmV3R2FtZUVsID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9YWN0aW9uLXJlc3RhcnRdJyk7XG4gICAgdGhpcy5zYXZlR2FtZUVsID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9YWN0aW9uLXNhdmVdJyk7XG4gICAgdGhpcy5sb2FkR2FtZUVsID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9YWN0aW9uLWxvYWRdJyk7XG5cbiAgICB0aGlzLm5ld0dhbWVFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4gdGhpcy5vbk5ld0dhbWVDbGljayhldmVudCkpO1xuICAgIHRoaXMuc2F2ZUdhbWVFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4gdGhpcy5vblNhdmVHYW1lQ2xpY2soZXZlbnQpKTtcbiAgICB0aGlzLmxvYWRHYW1lRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHRoaXMub25Mb2FkR2FtZUNsaWNrKGV2ZW50KSk7XG5cbiAgICB0aGlzLmJvYXJkRWwgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pZD1ib2FyZF0nKTtcblxuICAgIHRoaXMuYm9hcmRFbC5jbGFzc0xpc3QuYWRkKHRoZW1lKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYm9hcmRTaXplICoqIDI7IGkgKz0gMSkge1xuICAgICAgY29uc3QgY2VsbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBjZWxsRWwuY2xhc3NMaXN0LmFkZCgnY2VsbCcsICdtYXAtdGlsZScsIGBtYXAtdGlsZS0ke2NhbGNUaWxlVHlwZShpLCB0aGlzLmJvYXJkU2l6ZSl9YCk7XG4gICAgICBjZWxsRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIChldmVudCkgPT4gdGhpcy5vbkNlbGxFbnRlcihldmVudCkpO1xuICAgICAgY2VsbEVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoZXZlbnQpID0+IHRoaXMub25DZWxsTGVhdmUoZXZlbnQpKTtcbiAgICAgIGNlbGxFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4gdGhpcy5vbkNlbGxDbGljayhldmVudCkpO1xuICAgICAgdGhpcy5ib2FyZEVsLmFwcGVuZENoaWxkKGNlbGxFbCk7XG4gICAgfVxuXG4gICAgdGhpcy5jZWxscyA9IEFycmF5LmZyb20odGhpcy5ib2FyZEVsLmNoaWxkcmVuKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3cyBwb3NpdGlvbnMgKHdpdGggY2hhcnMpIG9uIGJvYXJkRWxcbiAgICpcbiAgICogQHBhcmFtIHBvc2l0aW9ucyBhcnJheSBvZiBQb3NpdGlvbmVkQ2hhcmFjdGVyIG9iamVjdHNcbiAgICovXG4gIHJlZHJhd1Bvc2l0aW9ucyhwb3NpdGlvbnMpIHtcbiAgICBmb3IgKGNvbnN0IGNlbGwgb2YgdGhpcy5jZWxscykge1xuICAgICAgY2VsbC5pbm5lckhUTUwgPSAnJztcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHBvc2l0aW9uIG9mIHBvc2l0aW9ucykge1xuICAgICAgY29uc3QgY2VsbEVsID0gdGhpcy5ib2FyZEVsLmNoaWxkcmVuW3Bvc2l0aW9uLnBvc2l0aW9uXTtcbiAgICAgIGNvbnN0IGNoYXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY2hhckVsLmNsYXNzTGlzdC5hZGQoJ2NoYXJhY3RlcicsIHBvc2l0aW9uLmNoYXJhY3Rlci50eXBlKTtcblxuICAgICAgY29uc3QgaGVhbHRoRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGhlYWx0aEVsLmNsYXNzTGlzdC5hZGQoJ2hlYWx0aC1sZXZlbCcpO1xuXG4gICAgICBjb25zdCBoZWFsdGhJbmRpY2F0b3JFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgaGVhbHRoSW5kaWNhdG9yRWwuY2xhc3NMaXN0LmFkZCgnaGVhbHRoLWxldmVsLWluZGljYXRvcicsIGBoZWFsdGgtbGV2ZWwtaW5kaWNhdG9yLSR7Y2FsY0hlYWx0aExldmVsKHBvc2l0aW9uLmNoYXJhY3Rlci5oZWFsdGgpfWApO1xuICAgICAgaGVhbHRoSW5kaWNhdG9yRWwuc3R5bGUud2lkdGggPSBgJHtwb3NpdGlvbi5jaGFyYWN0ZXIuaGVhbHRofSVgO1xuICAgICAgaGVhbHRoRWwuYXBwZW5kQ2hpbGQoaGVhbHRoSW5kaWNhdG9yRWwpO1xuXG4gICAgICBjaGFyRWwuYXBwZW5kQ2hpbGQoaGVhbHRoRWwpO1xuICAgICAgY2VsbEVsLmFwcGVuZENoaWxkKGNoYXJFbCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBsaXN0ZW5lciB0byBtb3VzZSBlbnRlciBmb3IgY2VsbFxuICAgKlxuICAgKiBAcGFyYW0gY2FsbGJhY2tcbiAgICovXG4gIGFkZENlbGxFbnRlckxpc3RlbmVyKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jZWxsRW50ZXJMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGxpc3RlbmVyIHRvIG1vdXNlIGxlYXZlIGZvciBjZWxsXG4gICAqXG4gICAqIEBwYXJhbSBjYWxsYmFja1xuICAgKi9cbiAgYWRkQ2VsbExlYXZlTGlzdGVuZXIoY2FsbGJhY2spIHtcbiAgICB0aGlzLmNlbGxMZWF2ZUxpc3RlbmVycy5wdXNoKGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgbGlzdGVuZXIgdG8gbW91c2UgY2xpY2sgZm9yIGNlbGxcbiAgICpcbiAgICogQHBhcmFtIGNhbGxiYWNrXG4gICAqL1xuICBhZGRDZWxsQ2xpY2tMaXN0ZW5lcihjYWxsYmFjaykge1xuICAgIHRoaXMuY2VsbENsaWNrTGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBsaXN0ZW5lciB0byBcIk5ldyBHYW1lXCIgYnV0dG9uIGNsaWNrXG4gICAqXG4gICAqIEBwYXJhbSBjYWxsYmFja1xuICAgKi9cbiAgYWRkTmV3R2FtZUxpc3RlbmVyKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5uZXdHYW1lTGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBsaXN0ZW5lciB0byBcIlNhdmUgR2FtZVwiIGJ1dHRvbiBjbGlja1xuICAgKlxuICAgKiBAcGFyYW0gY2FsbGJhY2tcbiAgICovXG4gIGFkZFNhdmVHYW1lTGlzdGVuZXIoY2FsbGJhY2spIHtcbiAgICB0aGlzLnNhdmVHYW1lTGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBsaXN0ZW5lciB0byBcIkxvYWQgR2FtZVwiIGJ1dHRvbiBjbGlja1xuICAgKlxuICAgKiBAcGFyYW0gY2FsbGJhY2tcbiAgICovXG4gIGFkZExvYWRHYW1lTGlzdGVuZXIoY2FsbGJhY2spIHtcbiAgICB0aGlzLmxvYWRHYW1lTGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xuICB9XG5cbiAgb25DZWxsRW50ZXIoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5jZWxscy5pbmRleE9mKGV2ZW50LmN1cnJlbnRUYXJnZXQpO1xuICAgIHRoaXMuY2VsbEVudGVyTGlzdGVuZXJzLmZvckVhY2goKG8pID0+IG8uY2FsbChudWxsLCBpbmRleCkpO1xuICB9XG5cbiAgb25DZWxsTGVhdmUoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5jZWxscy5pbmRleE9mKGV2ZW50LmN1cnJlbnRUYXJnZXQpO1xuICAgIHRoaXMuY2VsbExlYXZlTGlzdGVuZXJzLmZvckVhY2goKG8pID0+IG8uY2FsbChudWxsLCBpbmRleCkpO1xuICB9XG5cbiAgb25DZWxsQ2xpY2soZXZlbnQpIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuY2VsbHMuaW5kZXhPZihldmVudC5jdXJyZW50VGFyZ2V0KTtcbiAgICB0aGlzLmNlbGxDbGlja0xpc3RlbmVycy5mb3JFYWNoKChvKSA9PiBvLmNhbGwobnVsbCwgaW5kZXgpKTtcbiAgfVxuXG4gIG9uTmV3R2FtZUNsaWNrKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLm5ld0dhbWVMaXN0ZW5lcnMuZm9yRWFjaCgobykgPT4gby5jYWxsKG51bGwpKTtcbiAgfVxuXG4gIG9uU2F2ZUdhbWVDbGljayhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5zYXZlR2FtZUxpc3RlbmVycy5mb3JFYWNoKChvKSA9PiBvLmNhbGwobnVsbCkpO1xuICB9XG5cbiAgb25Mb2FkR2FtZUNsaWNrKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLmxvYWRHYW1lTGlzdGVuZXJzLmZvckVhY2goKG8pID0+IG8uY2FsbChudWxsKSk7XG4gIH1cblxuICBzdGF0aWMgc2hvd0Vycm9yKG1lc3NhZ2UpIHtcbiAgICBhbGVydChtZXNzYWdlKTtcbiAgfVxuXG4gIHN0YXRpYyBzaG93TWVzc2FnZShtZXNzYWdlKSB7XG4gICAgYWxlcnQobWVzc2FnZSk7XG4gIH1cblxuICBzZWxlY3RDZWxsKGluZGV4LCBjb2xvciA9ICd5ZWxsb3cnKSB7XG4gICAgdGhpcy5kZXNlbGVjdENlbGwoaW5kZXgpO1xuICAgIHRoaXMuY2VsbHNbaW5kZXhdLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJywgYHNlbGVjdGVkLSR7Y29sb3J9YCk7XG4gIH1cblxuICBkZXNlbGVjdENlbGwoaW5kZXgpIHtcbiAgICBjb25zdCBjZWxsID0gdGhpcy5jZWxsc1tpbmRleF07XG4gICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKC4uLkFycmF5LmZyb20oY2VsbC5jbGFzc0xpc3QpXG4gICAgICAuZmlsdGVyKChvKSA9PiBvLnN0YXJ0c1dpdGgoJ3NlbGVjdGVkJykpKTtcbiAgfVxuXG4gIHNob3dDZWxsVG9vbHRpcChtZXNzYWdlLCBpbmRleCkge1xuICAgIHRoaXMuY2VsbHNbaW5kZXhdLnRpdGxlID0gbWVzc2FnZTtcbiAgfVxuXG4gIGhpZGVDZWxsVG9vbHRpcChpbmRleCkge1xuICAgIHRoaXMuY2VsbHNbaW5kZXhdLnRpdGxlID0gJyc7XG4gIH1cblxuICBzaG93RGFtYWdlKGluZGV4LCBkYW1hZ2UpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIGNvbnN0IGNlbGwgPSB0aGlzLmNlbGxzW2luZGV4XTtcbiAgICAgIGNvbnN0IGRhbWFnZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgZGFtYWdlRWwudGV4dENvbnRlbnQgPSBkYW1hZ2U7XG4gICAgICBkYW1hZ2VFbC5jbGFzc0xpc3QuYWRkKCdkYW1hZ2UnKTtcbiAgICAgIGNlbGwuYXBwZW5kQ2hpbGQoZGFtYWdlRWwpO1xuXG4gICAgICBkYW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCAoKSA9PiB7XG4gICAgICAgIGNlbGwucmVtb3ZlQ2hpbGQoZGFtYWdlRWwpO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHNldEN1cnNvcihjdXJzb3IpIHtcbiAgICB0aGlzLmJvYXJkRWwuc3R5bGUuY3Vyc29yID0gY3Vyc29yO1xuICB9XG5cbiAgY2hlY2tCaW5kaW5nKCkge1xuICAgIGlmICh0aGlzLmNvbnRhaW5lciA9PT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdHYW1lUGxheSBub3QgYmluZCB0byBET00nKTtcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVTdGF0ZVNlcnZpY2Uge1xuICBjb25zdHJ1Y3RvcihzdG9yYWdlKSB7XG4gICAgdGhpcy5zdG9yYWdlID0gc3RvcmFnZTtcbiAgfVxuXG4gIHNhdmUoc3RhdGUpIHtcbiAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbSgnc3RhdGUnLCBKU09OLnN0cmluZ2lmeShzdGF0ZSkpO1xuICB9XG5cbiAgbG9hZCgpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UodGhpcy5zdG9yYWdlLmdldEl0ZW0oJ3N0YXRlJykpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzdGF0ZScpO1xuICAgIH1cbiAgfVxufVxuIiwiLy8gQHRzLW5vY2hlY2tcblxuaW1wb3J0IHRoZW1lcyBmcm9tICcuL3RoZW1lcyc7XG5pbXBvcnQgeyBnZW5lcmF0ZVRlYW0sIGdldEFsbG93ZWRDb29yZGluYXRlcyB9IGZyb20gJy4vZ2VuZXJhdG9ycyc7XG5pbXBvcnQgVGVhbSBmcm9tICcuL1RlYW0nO1xuaW1wb3J0IEdhbWVTdGF0ZSBmcm9tICcuL0dhbWVTdGF0ZSc7XG5pbXBvcnQgR2FtZVBsYXkgZnJvbSAnLi9HYW1lUGxheSc7XG5pbXBvcnQgY3Vyc29ycyBmcm9tICcuL2N1cnNvcnMnO1xuaW1wb3J0IHsgcG9zc2libGVBdHRhY2ssIHBvc3NpYmxlTW92ZSB9IGZyb20gJy4vdXRpbHMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lQ29udHJvbGxlciB7XG4gIGNvbnN0cnVjdG9yKGdhbWVQbGF5LCBzdGF0ZVNlcnZpY2UpIHtcbiAgICB0aGlzLmdhbWVQbGF5ID0gZ2FtZVBsYXk7XG4gICAgdGhpcy5zdGF0ZVNlcnZpY2UgPSBzdGF0ZVNlcnZpY2U7XG4gICAgdGhpcy5wbGF5ZXJUZWFtID0gZ2VuZXJhdGVUZWFtKG5ldyBUZWFtKCkucGxheWVyVGVhbSwgMSwgMyk7XG4gICAgdGhpcy5vcHBvbmVudFRlYW0gPSBnZW5lcmF0ZVRlYW0obmV3IFRlYW0oKS5vcHBvbmVudFRlYW0sIDEsIDMpO1xuICAgIHRoaXMuZ2FtZVN0YXRlID0gbmV3IEdhbWVTdGF0ZSh0aGlzLnBsYXllclRlYW0sIHRoaXMub3Bwb25lbnRUZWFtKTtcbiAgfVxuXG4gIGluaXQoKSB7XG4gICAgLy8gVE9ETzogYWRkIGV2ZW50IGxpc3RlbmVycyB0byBnYW1lUGxheSBldmVudHNcbiAgICAvLyBUT0RPOiBsb2FkIHNhdmVkIHN0YXRlZCBmcm9tIHN0YXRlU2VydmljZVxuICAgIHRoaXMuZ2FtZVBsYXkuZHJhd1VpKHRoZW1lc1sxXSk7XG4gICAgdGhpcy5nYW1lUGxheS5yZWRyYXdQb3NpdGlvbnMoWy4uLnRoaXMucGxheWVyVGVhbSwgLi4udGhpcy5vcHBvbmVudFRlYW1dKTtcbiAgICB0aGlzLmVudGVyT25DZWxsKCk7XG4gICAgdGhpcy5sZWF2ZU9uQ2VsbCgpO1xuICAgIHRoaXMuY2xpY2tPbkNlbGwoKTtcbiAgfVxuXG4gIG9uQ2VsbENsaWNrKGluZGV4KSB7XG4gICAgLy8gVE9ETzogcmVhY3QgdG8gY2xpY2tcbiAgICAvLyBDbGVhciAnc2VsZWN0ZWQteWVsbG93JyB3aGVuIGNsaWNrIG9uIG15c2VsZlxuICAgIGlmICh0aGlzLmdhbWVTdGF0ZS5zZWxlY3RlZENoYXJhY3RlciAmJiB0aGlzLmdhbWVTdGF0ZS5zZWxlY3RlZENoYXJhY3Rlci5wb3NpdGlvbiA9PT0gaW5kZXgpIHtcbiAgICAgIHRoaXMuZ2FtZVBsYXkuZGVzZWxlY3RDZWxsKGluZGV4KTtcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLnNlbGVjdGVkQ2hhcmFjdGVyID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ2xlYXIgJ3NlbGVjdGVkLXllbGxvdycgd2hlbiBjbGljayBvbiBhbm90aGVyIGZpZWxkIHdpdGggQ2hhcmFjdGVyIG9mIFBsYXllclxuICAgICAgY29uc3QgaXNDaGFyYWN0ZXIgPSB0aGlzLmhhc0NoYXJhY3RlcihpbmRleCk7XG4gICAgICBjb25zdCBwZXJzb24gPSB0aGlzLmdldENoYXJhY3RlcihpbmRleCk7XG4gICAgICBpZiAoaXNDaGFyYWN0ZXIpIHtcbiAgICAgICAgaWYgKHBlcnNvbi5jaGFyYWN0ZXIuaXNHb29kQ2hhcmFjdGVyKSB7XG4gICAgICAgICAgdGhpcy5nYW1lU3RhdGUuc2VsZWN0ZWRDaGFyYWN0ZXIgPSBwZXJzb247XG4gICAgICAgICAgdGhpcy5nYW1lUGxheS5jZWxscy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoLi4uQXJyYXkuZnJvbShlbGVtZW50LmNsYXNzTGlzdClcbiAgICAgICAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5zdGFydHNXaXRoKCdzZWxlY3RlZCcpKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5nYW1lUGxheS5zZWxlY3RDZWxsKGluZGV4KTtcbiAgICAgICAgICB0aGlzLmdhbWVQbGF5LnNldEN1cnNvcihjdXJzb3JzLnBvaW50ZXIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vINCV0YHQu9C4INC80L7QttC10Lwg0L/QtdGA0LXQvNC10YHRgtC40YLRjCDQv9C10YDRgdC+0L3QsNC20LAg0L3QsCDQv9GD0YHRgtGD0Y4g0LrQu9C10YLQutGDXG4gICAgICBpZiAodGhpcy5nYW1lU3RhdGUuc2VsZWN0ZWRDaGFyYWN0ZXIgJiYgIWlzQ2hhcmFjdGVyKSB7XG4gICAgICAgIGNvbnN0IG1vdmVEaXN0YW5jZSA9IHRoaXMuZ2FtZVN0YXRlLnNlbGVjdGVkQ2hhcmFjdGVyLmNoYXJhY3Rlci5tb3ZlQ2VsbDtcbiAgICAgICAgY29uc3QgcG9zaXRpb25DaGFyYWN0ZXIgPSB0aGlzLmdhbWVTdGF0ZS5zZWxlY3RlZENoYXJhY3Rlci5wb3NpdGlvbjtcbiAgICAgICAgY29uc3QgcG9zTW92ZSA9IHBvc3NpYmxlTW92ZShwb3NpdGlvbkNoYXJhY3RlciwgaW5kZXgsIG1vdmVEaXN0YW5jZSk7XG4gICAgICAgIGlmIChwb3NNb3ZlKSB7XG4gICAgICAgICAgdGhpcy5nYW1lU3RhdGUucGxheWVyVGVhbSA9IHRoaXMuZmlsdGVyVGVhbSh0aGlzLmdhbWVTdGF0ZS5zZWxlY3RlZENoYXJhY3Rlcik7XG4gICAgICAgICAgdGhpcy5nYW1lU3RhdGUucGxheWVyVGVhbSA9IFsuLi50aGlzLmdhbWVTdGF0ZS5wbGF5ZXJUZWFtLCB0aGlzLmdhbWVTdGF0ZS5zZWxlY3RlZENoYXJhY3Rlcl07XG4gICAgICAgICAgdGhpcy5nYW1lU3RhdGUuc2VsZWN0ZWRDaGFyYWN0ZXIucG9zaXRpb24gPSBpbmRleDtcbiAgICAgICAgICB0aGlzLmVuZE1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG9uQ2VsbEVudGVyKGluZGV4KSB7XG4gICAgLy8gVE9ETzogcmVhY3QgdG8gbW91c2UgZW50ZXJcbiAgICBjb25zdCBpc0NoYXJhY3RlciA9IHRoaXMuaGFzQ2hhcmFjdGVyKGluZGV4KTtcbiAgICBjb25zdCBwZXJzb24gPSB0aGlzLmdldENoYXJhY3RlcihpbmRleCk7XG4gICAgaWYgKGlzQ2hhcmFjdGVyKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gYFxcdXsxRjM5Nn0ke3BlcnNvbi5jaGFyYWN0ZXIubGV2ZWx9IFxcdXsxRjVFMX0ke3BlcnNvbi5jaGFyYWN0ZXIuYXR0YWNrfSBcXHV7MUY2RTF9JHtwZXJzb24uY2hhcmFjdGVyLmRlZmVuY2V9IFxcdXsxRjQ5M30ke3BlcnNvbi5jaGFyYWN0ZXIuaGVhbHRofWA7XG4gICAgICB0aGlzLmdhbWVQbGF5LnNob3dDZWxsVG9vbHRpcChtZXNzYWdlLCBpbmRleCk7XG4gICAgfVxuICAgIC8vINCS0YvQsdGA0LDQvSDQv9C10YDRgdC+0L3QsNC2INC4INGP0YfQtdC50LrQsCDQvdCw0LfQvdCw0YfQtdC90LjRjyDQv9GD0YHRgtCw0Y9cbiAgICBpZiAodGhpcy5nYW1lU3RhdGUuc2VsZWN0ZWRDaGFyYWN0ZXIgJiYgIWlzQ2hhcmFjdGVyKSB7XG4gICAgICBjb25zdCBtb3ZlRGlzdGFuY2UgPSB0aGlzLmdhbWVTdGF0ZS5zZWxlY3RlZENoYXJhY3Rlci5jaGFyYWN0ZXIubW92ZUNlbGw7XG4gICAgICBpZiAocG9zc2libGVNb3ZlKHRoaXMuZ2FtZVN0YXRlLnNlbGVjdGVkQ2hhcmFjdGVyLnBvc2l0aW9uLCBpbmRleCwgbW92ZURpc3RhbmNlKSkge1xuICAgICAgICB0aGlzLmdhbWVQbGF5LnNlbGVjdENlbGwoaW5kZXgsICdncmVlbicpO1xuICAgICAgICB0aGlzLmdhbWVQbGF5LnNldEN1cnNvcihjdXJzb3JzLnBvaW50ZXIpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyDQktGL0LHRgNCw0L0g0L/QtdGA0YHQvtC90LDQtiDQuCDQsiDQvdC+0LLQvtC5INC60LvQtdGC0LrQtSDQvdCw0YXQvtC00LjRgtGB0Y8g0L/QtdGA0YHQvtC90LDQtiDQv9GA0L7RgtC40LLQvtC/0L7Qu9C+0LbQvdC+0Lkg0LrQvtC80LDQvdC00YtcbiAgICBpZiAoaXNDaGFyYWN0ZXIpIHtcbiAgICAgIGlmICh0aGlzLmdhbWVTdGF0ZS5zZWxlY3RlZENoYXJhY3RlciAmJiAhcGVyc29uLmNoYXJhY3Rlci5pc0dvb2RDaGFyYWN0ZXIpIHtcbiAgICAgICAgY29uc3QgYXR0YWNrRGlzdGFuY2UgPSB0aGlzLmdhbWVTdGF0ZS5zZWxlY3RlZENoYXJhY3Rlci5jaGFyYWN0ZXIuYXR0YWNrQ2VsbDtcbiAgICAgICAgaWYgKHBvc3NpYmxlQXR0YWNrKHRoaXMuZ2FtZVN0YXRlLnNlbGVjdGVkQ2hhcmFjdGVyLnBvc2l0aW9uLCBpbmRleCwgYXR0YWNrRGlzdGFuY2UpKSB7XG4gICAgICAgICAgdGhpcy5nYW1lUGxheS5zZWxlY3RDZWxsKGluZGV4LCAncmVkJyk7XG4gICAgICAgICAgdGhpcy5nYW1lUGxheS5zZXRDdXJzb3IoY3Vyc29ycy5jcm9zc2hhaXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuZ2FtZVBsYXkuc2V0Q3Vyc29yKGN1cnNvcnMubm90YWxsb3dlZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBvbkNlbGxMZWF2ZShpbmRleCkge1xuICAgIC8vIFRPRE86IHJlYWN0IHRvIG1vdXNlIGxlYXZlXG4gICAgdGhpcy5nYW1lUGxheS5zZXRDdXJzb3IoY3Vyc29ycy5wb2ludGVyKTtcbiAgICB0aGlzLmdhbWVQbGF5LmNlbGxzLmZvckVhY2goKGNlbGwpID0+IGNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQtZ3JlZW4nLCAnc2VsZWN0ZWQtcmVkJykpO1xuICAgIHRoaXMuZ2FtZVBsYXkuaGlkZUNlbGxUb29sdGlwKGluZGV4KTtcbiAgfVxuXG4gIGhhc0NoYXJhY3RlcihpbmRleCkge1xuICAgIGNvbnN0IGFsbENoYXJhY3RlcnMgPSBbLi4udGhpcy5wbGF5ZXJUZWFtLCAuLi50aGlzLm9wcG9uZW50VGVhbV07XG4gICAgcmV0dXJuIGFsbENoYXJhY3RlcnMuc29tZSgocGVyc29uKSA9PiBwZXJzb24ucG9zaXRpb24gPT09IGluZGV4KTtcbiAgfVxuXG4gIGdldENoYXJhY3RlcihpbmRleCkge1xuICAgIGxldCByZXN1bHQgPSB0aGlzLnBsYXllclRlYW0uZmluZCgocGVyc29uKSA9PiBwZXJzb24ucG9zaXRpb24gPT09IGluZGV4KTtcbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgcmVzdWx0ID0gdGhpcy5vcHBvbmVudFRlYW0uZmluZCgocGVyc29uKSA9PiBwZXJzb24ucG9zaXRpb24gPT09IGluZGV4KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGVudGVyT25DZWxsKCkge1xuICAgIHRoaXMuZ2FtZVBsYXkuYWRkQ2VsbEVudGVyTGlzdGVuZXIodGhpcy5vbkNlbGxFbnRlci5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIGxlYXZlT25DZWxsKCkge1xuICAgIHRoaXMuZ2FtZVBsYXkuYWRkQ2VsbExlYXZlTGlzdGVuZXIodGhpcy5vbkNlbGxMZWF2ZS5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIGNsaWNrT25DZWxsKCkge1xuICAgIHRoaXMuZ2FtZVBsYXkuYWRkQ2VsbENsaWNrTGlzdGVuZXIodGhpcy5vbkNlbGxDbGljay5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIC8vINCk0YPQvdC60YbQuNGPINGE0LjQu9GM0YLRgNCw0YbQuNC4INCz0LXRgNC+0LXQsiDQuCDRg9C00LDQu9C10L3QuNGPINGC0L7Qs9C+LCDQutC+0YLQvtGA0YvQuSDQv9C10YDQtdC80LXRgdGC0LjQu9GB0Y9cbiAgZmlsdGVyVGVhbShwZXJzb24pIHtcbiAgICBsZXQgcmVzdWx0O1xuICAgIGlmIChwZXJzb24uY2hhcmFjdGVyLmlzR29vZENoYXJhY3Rlcikge1xuICAgICAgcmVzdWx0ID0gdGhpcy5nYW1lU3RhdGUucGxheWVyVGVhbS5maWx0ZXIoKGVsZW0pID0+IGVsZW0ucG9zaXRpb24gIT09IHBlcnNvbi5wb3NpdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdCA9IHRoaXMuZ2FtZVN0YXRlLm9wcG9uZW50VGVhbS5maWx0ZXIoKGVsZW0pID0+IGVsZW0ucG9zaXRpb24gIT09IHBlcnNvbi5wb3NpdGlvbik7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvLyDQpNGD0L3QutGG0LjRjyDQt9Cw0LLQtdGA0YjQtdC90LjRjyDRhdC+0LTQsCDQuNCz0YDQvtC60LBcbiAgZW5kTW92ZSgpIHtcbiAgICB0aGlzLmdhbWVQbGF5LmNlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZSguLi5BcnJheS5mcm9tKGNlbGwuY2xhc3NMaXN0KVxuICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtLnN0YXJ0c1dpdGgoJ3NlbGVjdGVkJykpKTtcbiAgICB9KTtcbiAgICB0aGlzLmdhbWVQbGF5LnJlZHJhd1Bvc2l0aW9ucyhbLi4udGhpcy5nYW1lU3RhdGUucGxheWVyVGVhbSwgLi4udGhpcy5nYW1lU3RhdGUub3Bwb25lbnRUZWFtXSk7XG4gICAgaWYgKHRoaXMuZ2FtZVN0YXRlLnBsYXllck1vdmUpIHtcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLnBsYXllck1vdmUgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5nYW1lU3RhdGUucGxheWVyTW92ZSA9IGZhbHNlO1xuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbImNhbGNUaWxlVHlwZSIsImluZGV4IiwiYm9hcmRTaXplIiwibm9ybUluZGV4IiwicmVzdWx0IiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwic2xpY2UiLCJkaXN0YW5jZVhZIiwiZmlyc3RQb3NpdGlvbiIsInNlY29uZFBvc2l0aW9uIiwiaW5pdGlhbENvb3JkcyIsIkFycmF5IiwiZmlsbCIsImNvb3JkcyIsIm1hcCIsImUiLCJpIiwieCIsInkiLCJNYXRoIiwiZmxvb3IiLCJjdXJyZW50Q29vcmRzIiwibmV4dENvb3JkcyIsImRpZmZYIiwiYWJzIiwiZGlmZlkiLCJwb3NzaWJsZU1vdmUiLCJjdXJQb3NpdGlvbiIsIm5leHRQb3NpdGlvbiIsIm1vdmVDZWxsIiwiZGlmZkNvb3JkcyIsIkNoYXJhY3RlciIsImNvbnN0cnVjdG9yIiwibGV2ZWwiLCJ0eXBlIiwibmFtZSIsIkVycm9yIiwidGhpcyIsImF0dGFjayIsImRlZmVuY2UiLCJoZWFsdGgiLCJQb3NpdGlvbmVkQ2hhcmFjdGVyIiwiY2hhcmFjdGVyIiwicG9zaXRpb24iLCJnZXRBbGxvd2VkQ29vcmRpbmF0ZXMiLCJ0eXBlVGVhbSIsImFsbENvb3JkcyIsImtleXMiLCJhbGxvd2VkQ29vcmRzIiwiZmlsdGVyIiwicG9zIiwiY2hhcmFjdGVyR2VuZXJhdG9yIiwiYWxsb3dlZFR5cGVzIiwibWF4TGV2ZWwiLCJyVHlwZSIsImxlbmd0aCIsInJhbmRvbSIsInJMZXZlbCIsImdlbmVyYXRlVGVhbSIsImNoYXJhY3RlckNvdW50IiwibmV3VGVhbSIsInBsYXllckNvb3JkcyIsIm9wcG9uZW50Q29vcmRzIiwibmV3Q2hhcmFjdGVyIiwibmV4dCIsInZhbHVlIiwiaXNHb29kQ2hhcmFjdGVyIiwic3BsaWNlIiwicHVzaCIsIkJvd21hbiIsInN1cGVyIiwiYXR0YWNrQ2VsbCIsIkRhZW1vbiIsIk1hZ2ljaWFuIiwiU3dvcmRzbWFuIiwiVW5kZWFkIiwiVmFtcGlyZSIsIlRlYW0iLCJwbGF5ZXJUZWFtIiwib3Bwb25lbnRUZWFtIiwiR2FtZVN0YXRlIiwicGxheWVyTW92ZSIsImZyb20iLCJvYmplY3QiLCJnYW1lUGxheSIsImNvbnRhaW5lciIsImJvYXJkRWwiLCJjZWxscyIsImNlbGxDbGlja0xpc3RlbmVycyIsImNlbGxFbnRlckxpc3RlbmVycyIsImNlbGxMZWF2ZUxpc3RlbmVycyIsIm5ld0dhbWVMaXN0ZW5lcnMiLCJzYXZlR2FtZUxpc3RlbmVycyIsImxvYWRHYW1lTGlzdGVuZXJzIiwiYmluZFRvRE9NIiwiSFRNTEVsZW1lbnQiLCJkcmF3VWkiLCJ0aGVtZSIsImNoZWNrQmluZGluZyIsImlubmVySFRNTCIsIm5ld0dhbWVFbCIsInF1ZXJ5U2VsZWN0b3IiLCJzYXZlR2FtZUVsIiwibG9hZEdhbWVFbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsIm9uTmV3R2FtZUNsaWNrIiwib25TYXZlR2FtZUNsaWNrIiwib25Mb2FkR2FtZUNsaWNrIiwiY2xhc3NMaXN0IiwiYWRkIiwiY2VsbEVsIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwib25DZWxsRW50ZXIiLCJvbkNlbGxMZWF2ZSIsIm9uQ2VsbENsaWNrIiwiYXBwZW5kQ2hpbGQiLCJjaGlsZHJlbiIsInJlZHJhd1Bvc2l0aW9ucyIsInBvc2l0aW9ucyIsImNlbGwiLCJjaGFyRWwiLCJoZWFsdGhFbCIsImhlYWx0aEluZGljYXRvckVsIiwic3R5bGUiLCJ3aWR0aCIsImFkZENlbGxFbnRlckxpc3RlbmVyIiwiY2FsbGJhY2siLCJhZGRDZWxsTGVhdmVMaXN0ZW5lciIsImFkZENlbGxDbGlja0xpc3RlbmVyIiwiYWRkTmV3R2FtZUxpc3RlbmVyIiwiYWRkU2F2ZUdhbWVMaXN0ZW5lciIsImFkZExvYWRHYW1lTGlzdGVuZXIiLCJwcmV2ZW50RGVmYXVsdCIsImluZGV4T2YiLCJjdXJyZW50VGFyZ2V0IiwiZm9yRWFjaCIsIm8iLCJjYWxsIiwic2hvd0Vycm9yIiwibWVzc2FnZSIsImFsZXJ0Iiwic2hvd01lc3NhZ2UiLCJzZWxlY3RDZWxsIiwiY29sb3IiLCJkZXNlbGVjdENlbGwiLCJyZW1vdmUiLCJzdGFydHNXaXRoIiwic2hvd0NlbGxUb29sdGlwIiwidGl0bGUiLCJoaWRlQ2VsbFRvb2x0aXAiLCJzaG93RGFtYWdlIiwiZGFtYWdlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJkYW1hZ2VFbCIsInRleHRDb250ZW50IiwicmVtb3ZlQ2hpbGQiLCJzZXRDdXJzb3IiLCJjdXJzb3IiLCJzdGF0ZVNlcnZpY2UiLCJzdG9yYWdlIiwic2F2ZSIsInN0YXRlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJsb2FkIiwicGFyc2UiLCJnZXRJdGVtIiwibG9jYWxTdG9yYWdlIiwiZ2FtZUN0cmwiLCJnYW1lU3RhdGUiLCJpbml0IiwidGhlbWVzIiwiZW50ZXJPbkNlbGwiLCJsZWF2ZU9uQ2VsbCIsImNsaWNrT25DZWxsIiwic2VsZWN0ZWRDaGFyYWN0ZXIiLCJpc0NoYXJhY3RlciIsImhhc0NoYXJhY3RlciIsInBlcnNvbiIsImdldENoYXJhY3RlciIsImVsZW1lbnQiLCJpdGVtIiwiY3Vyc29ycyIsIm1vdmVEaXN0YW5jZSIsImZpbHRlclRlYW0iLCJlbmRNb3ZlIiwiYXR0YWNrRGlzdGFuY2UiLCJwb3NzaWJsZUF0dGFjayIsInNvbWUiLCJmaW5kIiwiYmluZCIsImVsZW0iXSwic291cmNlUm9vdCI6IiJ9